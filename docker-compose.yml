version: '3.9'

services:
  bot_logic:
    container_name: bot_logic
    build: ./program
    depends_on:
      - db_express
      - ords

  db_express:
    container_name: db_express
    hostname: ${MY_ORACLE_HOSTNAME}
    image: container-registry.oracle.com/database/express:latest
    ports:
      - 1521:1521
    environment:
      - ORACLE_PWD=${MY_ORACLE_PASSWORD}
    volumes:
      - db_volume:/opt/oracle/oradata
  ords:
    container_name: ords
    image: container-registry.oracle.com/database/ords:latest
    ports:
      - 8181:8181
    volumes: 
      - ./ords_secrets:/opt/oracle/variables
    restart: always
    depends_on:
      - db_express

volumes:
  db_volume:
    external: false
